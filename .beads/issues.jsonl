{"id":"dh-02n","content_hash":"ba0d4d4d36d23db57434c2c88badd43f46ff389813b10a4084bc8400375c78e6","title":"Add dependency validation tooling","description":"## Overview\nAdd tooling to detect circular dependencies, orphan modules, and unused code.\n\n## Tools\n- dependency-cruiser - Architecture validation and circular dependency detection\n- knip - Unused exports, dependencies, and files detection\n- changesets - Semantic versioning and changelog generation\n\n## Why\n- Catch architectural issues early\n- Keep codebase clean of dead code\n- Proper release management with changelogs","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T07:15:15.548317712Z","updated_at":"2025-11-25T07:15:15.548317712Z","source_repo":".","dependencies":[{"issue_id":"dh-02n","depends_on_id":"dh-5rx","type":"blocks","created_at":"2025-11-25T07:15:20.292822533Z","created_by":"daemon"}]}
{"id":"dh-09s","content_hash":"78f4cb1884cff2d2c6b495f5205ee74f51c8a42a92cf9123e9a7f0ce0f0d65e8","title":"Migrate deep-heating-home-assistant tests to Bun","description":"## Task\nMigrate tests in packages/deep-heating-home-assistant from Jest to Bun native.\n\n## Steps\n1. Update test imports to use buntest\n2. Convert Jest patterns to Bun equivalents\n3. Convert Effect tests to use `it.effect()`\n4. Update package.json test script\n5. Remove Jest config\n\n## Notes\nThis package uses Effect heavily - good candidate for it.effect() patterns","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:32.639852102Z","updated_at":"2025-11-25T07:14:32.639852102Z","source_repo":".","dependencies":[{"issue_id":"dh-09s","depends_on_id":"dh-659","type":"blocks","created_at":"2025-11-25T07:14:39.539958612Z","created_by":"daemon"}]}
{"id":"dh-159","content_hash":"6d069ca16800dab4f38e888014792308675f02abd3c1f125030996699737f4d1","title":"Migrate deep-heating Docker image to Nix","description":"## Task\nReplace packages/deep-heating/Dockerfile with Nix derivation.\n\n## Current Dockerfile\n- Multi-stage build\n- Turbo prune → Build → Runtime\n- nginx + pm2 for serving\n\n## Nix Approach\n- Separate derivations for build and runtime\n- Use dockerTools.buildLayeredImage\n- Include nginx and process manager in image\n\n## Output\n- Container image loadable via `docker load \u003c result`\n- Equivalent functionality to current Docker image\n- Smaller size due to minimal base\n\n## Home Assistant Integration\n- Verify image works as HA add-on\n- Check any add-on specific requirements","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:15:45.592528121Z","updated_at":"2025-11-25T07:15:45.592528121Z","source_repo":".","dependencies":[{"issue_id":"dh-159","depends_on_id":"dh-hgg","type":"blocks","created_at":"2025-11-25T07:15:50.641723297Z","created_by":"daemon"}]}
{"id":"dh-1gr","content_hash":"73fb60cda033755aeb3715a5c3b44528095ca69411d637fc7b665cb79fe05b14","title":"Add changesets for version management","description":"## Task\nAdd @changesets/cli for semantic versioning and changelog generation.\n\n## Installation\n`bun add -D @changesets/cli`\n`bunx changeset init`\n\n## Configuration\nConfigure .changeset/config.json for:\n- Monorepo workspace versioning\n- Changelog generation\n- Access level (public/restricted)\n\n## Workflow\n1. Create changeset: `bunx changeset`\n2. Version packages: `bunx changeset version`\n3. Publish: `bunx changeset publish`\n\n## Notes\nThis may not be immediately needed if not publishing to npm, but useful for tracking changes","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:15:15.865152041Z","updated_at":"2025-11-25T07:15:15.865152041Z","source_repo":".","dependencies":[{"issue_id":"dh-1gr","depends_on_id":"dh-b5h","type":"blocks","created_at":"2025-11-25T07:15:20.336977293Z","created_by":"daemon"}]}
{"id":"dh-1kv","content_hash":"a219baecc6cc99f951b447e2519a1ae196cfda880ed198ac083b7c2e89ba8567","title":"Add bun enforcement to package.json","description":"## Task\nConfigure package.json to enforce bun usage and prevent accidental npm/yarn usage.\n\n## Changes\n1. Update packageManager field: `\"packageManager\": \"bun@1.3.2\"`\n2. Add preinstall hook: `\"preinstall\": \"npx only-allow bun\"`\n\n## Why\nPrevents team members from accidentally using npm and creating lockfile conflicts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-25T07:12:29.631173058Z","updated_at":"2025-11-25T07:48:23.093390559Z","closed_at":"2025-11-25T07:48:23.093390559Z","source_repo":".","dependencies":[{"issue_id":"dh-1kv","depends_on_id":"dh-k8y","type":"blocks","created_at":"2025-11-25T07:13:21.163325085Z","created_by":"daemon"}]}
{"id":"dh-20r","content_hash":"3bbff085fa5c4908231ec2bc6df3df4571603ba740542dfdee03495b6100766d","title":"Convert .eslintrc.json to eslint.config.mjs","description":"## Task\nMigrate from legacy ESLint config format to flat config.\n\n## Changes\n- Delete .eslintrc.json files\n- Create eslint.config.mjs at root\n- Migrate all rules and plugin configurations\n- Update any package-specific ESLint configs\n\n## Structure\nThe new config should have layered configuration:\n1. Base TypeScript rules\n2. Prettier compatibility\n3. Functional programming rules (non-test files)\n4. Test-specific rules\n\n## Reference\nSee automatarr/eslint.config.mjs for target structure","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:01.97891588Z","updated_at":"2025-11-25T07:14:01.97891588Z","source_repo":".","dependencies":[{"issue_id":"dh-20r","depends_on_id":"dh-hkk","type":"blocks","created_at":"2025-11-25T07:14:06.668370682Z","created_by":"daemon"}]}
{"id":"dh-2o9","content_hash":"256b1cc64ef6b42e15156bdd90e785547b5d7b1fd53fea7c8c5445207fbbd52b","title":"Add eslint-plugin-functional for immutability rules","description":"## Task\nAdd and configure eslint-plugin-functional to enforce immutable programming patterns.\n\n## Installation\n`bun add -D eslint-plugin-functional`\n\n## Configuration\nAdd to eslint.config.mjs with rules like:\n- no-let (prefer const)\n- immutable-data (no mutations)\n- no-loop-statements (prefer map/filter/reduce)\n- functional-parameters (no rest params in certain contexts)\n\n## Scope\nApply to source files only, not test files (tests may need mutations for setup)","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:02.102854144Z","updated_at":"2025-11-25T07:14:02.102854144Z","source_repo":".","dependencies":[{"issue_id":"dh-2o9","depends_on_id":"dh-20r","type":"blocks","created_at":"2025-11-25T07:14:06.682565579Z","created_by":"daemon"}]}
{"id":"dh-3r6","content_hash":"b87df2217d016cc0b806572a33417bc827c4eef49fcc6f17118f22f2a4a874e9","title":"Create bun-pruned.nix for dependency management","description":"## Task\nCreate Nix derivation for Bun dependencies that can be cached and shared.\n\n## Purpose\n- Extract production dependencies from bun.lock\n- Create fixed-output derivation for caching\n- Enable reproducible builds without network access\n\n## Reference\n- automatarr/bun-pruned.nix\n- This is auto-generated from bun.lock\n\n## Integration\n- Pre-commit hook to regenerate when bun.lock changes\n- Import into flake.nix for builds","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:15:45.308801827Z","updated_at":"2025-11-25T07:15:45.308801827Z","source_repo":".","dependencies":[{"issue_id":"dh-3r6","depends_on_id":"dh-7rz","type":"blocks","created_at":"2025-11-25T07:15:50.612672212Z","created_by":"daemon"}]}
{"id":"dh-3vs","content_hash":"2b71bfd7a920269aa59c715af8a0f84404a139e6dc777666a607a85b6a295156","title":"Update scripts and verify builds with Bun","description":"## Task\nEnsure all npm scripts work correctly with bun and verify the full build pipeline.\n\n## Verification Steps\n1. `bun run build` - all packages build successfully\n2. `bun run test` - all tests pass\n3. `bun run lint` - linting works\n4. `bun run dev` - dev servers start correctly\n5. Manual smoke test of web UI\n\n## Notes\n- Most scripts should work unchanged\n- Watch for any npm-specific behaviours in scripts\n- Update any scripts that shell out to npm directly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-25T07:12:29.729974266Z","updated_at":"2025-11-25T07:49:21.373612057Z","closed_at":"2025-11-25T07:49:21.373612057Z","source_repo":".","dependencies":[{"issue_id":"dh-3vs","depends_on_id":"dh-1kv","type":"blocks","created_at":"2025-11-25T07:13:21.177791972Z","created_by":"daemon"}]}
{"id":"dh-5rw","content_hash":"5f4d5361c529adf699409f9939d527d5f822281d5094ba78e99a5c2f7ab8006a","title":"Migrate deep-heating-rx tests to Bun","description":"## Task\nMigrate all tests in packages/deep-heating-rx from Jest to Bun native.\n\n## Steps\n1. Update test file imports to use buntest\n2. Convert Jest-specific patterns:\n   - `describe/it/expect` → Bun equivalents\n   - `jest.fn()` → `mock()`\n   - `jest.spyOn()` → Bun spy equivalent\n3. Convert Effect tests to use `it.effect()`\n4. Update package.json test script\n5. Remove Jest config\n\n## Files\nThis package has the most tests - treat as the main migration reference.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:32.502838683Z","updated_at":"2025-11-25T07:14:32.502838683Z","source_repo":".","dependencies":[{"issue_id":"dh-5rw","depends_on_id":"dh-659","type":"blocks","created_at":"2025-11-25T07:14:39.525817975Z","created_by":"daemon"}]}
{"id":"dh-5rx","content_hash":"050399f84d4a55bc4cc00a818bfb3b3058c15b1b5991e712e006af2cf4506dc8","title":"Expand Effect library usage","description":"## Overview\nUpdate Effect to latest version and expand its usage throughout the codebase, following patterns established in automatarr.\n\n## Current State\n- Effect 3.5.5 used primarily in deep-heating-home-assistant\n- RxJS used extensively for reactive streams\n\n## Target State\n- Effect 3.19.4+ used for:\n  - All async/error handling\n  - Service layer dependency injection via Layer\n  - Schema validation\n  - Potentially replacing some RxJS patterns\n\n## Scope\nThis is a gradual migration - not a full rewrite. Focus on new code and strategic refactoring.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T07:14:57.343388698Z","updated_at":"2025-11-25T07:14:57.343388698Z","source_repo":".","dependencies":[{"issue_id":"dh-5rx","depends_on_id":"dh-gno","type":"blocks","created_at":"2025-11-25T07:15:01.655005736Z","created_by":"daemon"}]}
{"id":"dh-659","content_hash":"6f3d9a636cca21638567d80638050d048f05c9dfbdd4b0e8ae88bd34b5789a56","title":"Integrate buntest package from eventsourcing repo","description":"## Task\nIntegrate buntest package from eventsourcing repo for Effect test integration.\n\n## Dependency\nThis depends on the buntest-equivalent package being published from the eventsourcing repo. Once available, add it as a workspace dependency.\n\n## Steps\n1. Wait for buntest package to be published from eventsourcing repo\n2. Add as dependency: `bun add -D @\u003cscope\u003e/buntest`\n3. Verify it provides required features:\n   - `it.effect()` for Effect-native test assertions\n   - Proper Effect runtime management per test\n   - Integration with Bun's expect API\n4. Update any test utilities documentation\n\n## Blocked By\nExternal: buntest package publication from eventsourcing repo","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:32.367784892Z","updated_at":"2025-11-25T07:23:38.876353671Z","source_repo":".","dependencies":[{"issue_id":"dh-659","depends_on_id":"dh-b5h","type":"blocks","created_at":"2025-11-25T07:14:39.511441216Z","created_by":"daemon"}]}
{"id":"dh-7rz","content_hash":"d1996b4b4869f263f58e60b1d29685ed792b79b1d59b52dc88a4fa41f08b633d","title":"Create flake.nix for reproducible builds","description":"## Task\nCreate Nix flake configuration for the monorepo.\n\n## Structure\n```nix\n{\n  inputs = {\n    nixpkgs.url = \"github:NixOS/nixpkgs/nixos-unstable\";\n    # ... other inputs\n  };\n  \n  outputs = { self, nixpkgs, ... }: {\n    packages.x86_64-linux = {\n      default = ...;\n      dockerImage = ...;\n    };\n    devShells.x86_64-linux.default = ...;\n  };\n}\n```\n\n## Features\n- Development shell with Bun, Git, etc.\n- Package build for deep-heating\n- Docker image derivation\n\n## Reference\n- automatarr/flake.nix for structure\n- Nix documentation for Bun integration","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:15:45.193162353Z","updated_at":"2025-11-25T07:15:45.193162353Z","source_repo":".","dependencies":[{"issue_id":"dh-7rz","depends_on_id":"dh-b5h","type":"blocks","created_at":"2025-11-25T07:15:50.598603433Z","created_by":"daemon"}]}
{"id":"dh-7xh","content_hash":"bd58529efee50d6f152e56038f7276ea53735ad438fe06dfd56ae82eaf682ba0","title":"Document Effect patterns and conventions","description":"## Task\nCreate documentation for Effect usage patterns in this codebase.\n\n## Content\n- When to use Effect vs RxJS\n- Layer patterns for dependency injection\n- Error handling conventions\n- Schema validation patterns\n- Testing Effect code with buntest\n\n## Location\nAdd to CLAUDE.md or create dedicated docs/EFFECT.md\n\n## Purpose\nEnsure consistent Effect usage across the codebase and help new developers understand the patterns","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:57.655023309Z","updated_at":"2025-11-25T07:14:57.655023309Z","source_repo":".","dependencies":[{"issue_id":"dh-7xh","depends_on_id":"dh-c34","type":"blocks","created_at":"2025-11-25T07:15:01.697606001Z","created_by":"daemon"}]}
{"id":"dh-8g9","content_hash":"1cf0fe0d66672e03d42125de12a856369522115fcdff279a46b273db9fd0e9e0","title":"Add Effect-specific ESLint rules","description":"## Task\nAdd ESLint rules to enforce correct Effect usage patterns.\n\n## Options\n1. Use existing @effect/eslint-plugin if available\n2. Create custom rules based on automatarr's @codeforbreakfast/eslint-effect\n\n## Rules to Consider\n- Prefer Effect patterns over Promise\n- Enforce proper error handling\n- Prevent runPromise/runSync outside scripts\n- Enforce Layer patterns for dependency injection\n\n## Note\nThis may require creating a custom ESLint plugin package if existing solutions don't fit","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:02.222727342Z","updated_at":"2025-11-25T07:14:02.222727342Z","source_repo":".","dependencies":[{"issue_id":"dh-8g9","depends_on_id":"dh-20r","type":"blocks","created_at":"2025-11-25T07:14:06.696610574Z","created_by":"daemon"}]}
{"id":"dh-91v","content_hash":"61372e107c4bf7b2e54114c2607b0ac552e9f261450461f8bd92dfb029c65d2f","title":"Migrate remaining package tests to Bun","description":"## Task\nMigrate tests in remaining packages from Jest to Bun native:\n- deep-heating-types\n- deep-heating-state\n- rxx\n- dictionary (if any)\n\n## Steps per package\n1. Update test imports to use buntest\n2. Convert Jest patterns to Bun equivalents\n3. Update package.json test script\n4. Remove Jest config\n\n## Notes\nThese packages likely have fewer tests - should be straightforward after rx and home-assistant migrations","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:32.783048317Z","updated_at":"2025-11-25T07:14:32.783048317Z","source_repo":".","dependencies":[{"issue_id":"dh-91v","depends_on_id":"dh-5rw","type":"blocks","created_at":"2025-11-25T07:14:39.55415719Z","created_by":"daemon"}]}
{"id":"dh-9i8","content_hash":"2927273e7d95d3c84b4e34fcf7de28a9bb96ef5ee8a425ac6c857831e0865317","title":"Add knip for unused code detection","description":"## Task\nAdd knip to detect unused exports, dependencies, and files.\n\n## Installation\n`bun add -D knip`\n\n## Configuration\nCreate knip.config.ts with:\n- Workspace configuration for monorepo\n- Entry points for each package\n- Ignore patterns for false positives\n\n## Integration\n- Add `unused:check` script to package.json\n- Optionally add to CI pipeline\n\n## Benefits\n- Find dead code\n- Detect unused dependencies\n- Keep exports clean","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:15:15.757204914Z","updated_at":"2025-11-25T07:15:15.757204914Z","source_repo":".","dependencies":[{"issue_id":"dh-9i8","depends_on_id":"dh-b5h","type":"blocks","created_at":"2025-11-25T07:15:20.321738185Z","created_by":"daemon"}]}
{"id":"dh-9vb","content_hash":"7ef6d34a9f12df9c3f8b0fe5da1ee1a1eae3cfdba618572d4b49e9633b8b23d5","title":"Add Effect language service plugin","description":"## Task\nAdd the Effect TypeScript language service plugin for better IDE integration.\n\n## Steps\n1. Add `@effect/language-service` as dev dependency\n2. Update tsconfig.base.json to include plugin:\n```json\n{\n  \"compilerOptions\": {\n    \"plugins\": [\n      { \"name\": \"@effect/language-service\" }\n    ]\n  }\n}\n```\n\n## Benefits\n- Better autocomplete for Effect types\n- Improved error messages for Effect code\n- Hover information for Effect combinators","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:13:37.36770342Z","updated_at":"2025-11-25T07:13:37.36770342Z","source_repo":".","dependencies":[{"issue_id":"dh-9vb","depends_on_id":"dh-cb3","type":"blocks","created_at":"2025-11-25T07:13:41.617795594Z","created_by":"daemon"}]}
{"id":"dh-a5l","content_hash":"60ec89971b3e8d0c86f0978ad65d82c1d3e81ac7f8a82580a182938458138f25","title":"Migrate package manager from npm to Bun","description":"## Overview\nReplace npm with Bun as the primary package manager. This is the foundational change that unblocks most other modernisation work.\n\n## Why Bun?\n- Faster installs and script execution\n- Built-in TypeScript support\n- Native test runner (needed for testing migration)\n- Simpler toolchain (replaces multiple tools)\n\n## Scope\n- Replace lockfile\n- Update package.json configuration\n- Verify all packages build and run correctly\n- Update documentation\n\n## Technical Notes\n- Bun is largely npm-compatible but watch for native module compilation differences\n- Turbo orchestration should continue unchanged\n- May need to update some scripts that assume npm-specific behaviour","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-25T07:12:12.163911812Z","updated_at":"2025-11-25T07:49:27.847241901Z","closed_at":"2025-11-25T07:49:27.847241901Z","source_repo":"."}
{"id":"dh-a6k","content_hash":"6944476cd6d95bb416820c8f24c2534cdd7eab033609a2d1ca256411336f1e3e","title":"Replace Docker with Nix flakes for deployment","description":"## Overview\nReplace multi-stage Docker builds with Nix flakes for reproducible, minimal container images.\n\n## Why Nix\n- Bit-for-bit reproducible builds\n- Automatic dependency layering (optimal caching)\n- Minimal final images (no build tools)\n- Cross-compilation support\n- Better handling of Bun/Node native deps\n\n## Scope\n- Create flake.nix for the monorepo\n- Create bun-pruned.nix for dependency management\n- Build container images via Nix\n- Multi-arch support (x86_64, aarch64)\n\n## Challenges\n- Learning curve for Nix\n- Home Assistant add-on integration may have requirements\n- CI/CD pipeline changes","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T07:15:45.057190805Z","updated_at":"2025-11-25T07:15:45.057190805Z","source_repo":".","dependencies":[{"issue_id":"dh-a6k","depends_on_id":"dh-02n","type":"blocks","created_at":"2025-11-25T07:15:50.583498596Z","created_by":"daemon"}]}
{"id":"dh-am2","content_hash":"5a0530423e847c3eef89493fb0f63eff2d9a552af7efb85e6835b383ad0dc1ab","title":"Add @effect/workflow for orchestration","description":"## Task\nAdd @effect/workflow for orchestration patterns if applicable to the heating logic.\n\n## Evaluation\n1. Review current heating orchestration in deep-heating-rx\n2. Determine if workflow patterns would benefit the codebase\n3. If yes, add @effect/workflow and implement\n\n## Potential Use Cases\n- Heating schedule management\n- TRV coordination workflows\n- State machine patterns\n\n## Notes\nThis is optional - only implement if it provides clear benefits over current RxJS approach","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:57.551200953Z","updated_at":"2025-11-25T07:14:57.551200953Z","source_repo":".","dependencies":[{"issue_id":"dh-am2","depends_on_id":"dh-c34","type":"blocks","created_at":"2025-11-25T07:15:01.683576424Z","created_by":"daemon"}]}
{"id":"dh-b44","content_hash":"40701724689a08a25e16acc5e90050b70c575f931bc6b8502b9106d0d4327979","title":"Update TypeScript to 5.9.x","description":"## Overview\nUpdate TypeScript to the latest stable version (5.9.x) and modernise the configuration.\n\n## Key Changes\n- Update TypeScript from current version to 5.9.x\n- Switch target from ES2015 to ES2022\n- Switch module resolution from Node to Bundler\n- Add Effect language service plugin for better IDE diagnostics\n\n## Why\n- Better type inference and error messages\n- ES2022 features available without transpilation\n- Bundler resolution is more appropriate for modern tooling\n- Effect plugin provides better autocomplete and error messages for Effect code","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T07:13:37.033048447Z","updated_at":"2025-11-25T07:13:37.033048447Z","source_repo":".","dependencies":[{"issue_id":"dh-b44","depends_on_id":"dh-a5l","type":"blocks","created_at":"2025-11-25T07:13:41.575516189Z","created_by":"daemon"}]}
{"id":"dh-b5h","content_hash":"16216337f1b962c93aea3f4101203f587f6ce82e6a3f1c416921925ce89c8601","title":"Update documentation for Bun migration","description":"## Task\nUpdate all documentation to reflect the new Bun-based workflow.\n\n## Files to Update\n- CLAUDE.md - Update all command examples from npm to bun\n- .mise.toml - Add bun to managed tools\n- README files in packages if they reference npm\n\n## Changes\n- `npm run X` → `bun run X` or just `bun X`\n- `npm install` → `bun install`\n- `npm test` → `bun test`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-25T07:12:29.82246809Z","updated_at":"2025-11-25T18:16:24.805187Z","closed_at":"2025-11-25T18:16:24.805187Z","source_repo":".","dependencies":[{"issue_id":"dh-b5h","depends_on_id":"dh-3vs","type":"blocks","created_at":"2025-11-25T07:13:21.191675234Z","created_by":"daemon"}]}
{"id":"dh-c34","content_hash":"c579c07d2f49207d0d57ae71e340f43332123ebc3fd126cb5edff66bad94553d","title":"Update Effect to 3.19.x","description":"## Task\nUpdate Effect and related packages to latest stable versions.\n\n## Dependencies to Update\n- effect → 3.19.x\n- @effect/platform → 0.93.x\n- @effect/platform-node → latest compatible\n- @effect/schema → latest (if separate from effect)\n\n## Steps\n1. Update package.json dependencies\n2. Run `bun install`\n3. Fix any breaking changes from version upgrade\n4. Verify all Effect-using code still works\n\n## Breaking Changes to Watch\n- Check Effect changelog for 3.5 → 3.19 breaking changes\n- Schema API may have changed\n- Platform APIs may have changed","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:57.449614167Z","updated_at":"2025-11-25T07:14:57.449614167Z","source_repo":".","dependencies":[{"issue_id":"dh-c34","depends_on_id":"dh-luf","type":"blocks","created_at":"2025-11-25T07:15:01.669564208Z","created_by":"daemon"}]}
{"id":"dh-cb3","content_hash":"54b0a457c7656ccc7a059d32ad06e3f14c1bc569c6e3e27123689cee2b5749ed","title":"Modernise tsconfig: ES2022 target and bundler resolution","description":"## Task\nUpdate TypeScript configuration to use modern settings.\n\n## Changes to tsconfig.base.json\n- `target`: ES2015 → ES2022\n- `module`: ESNext (keep)\n- `moduleResolution`: Node → Bundler\n\n## Changes to package tsconfigs\n- Review and update any package-specific overrides\n- Ensure library output settings are still correct\n\n## Verification\n- Full build passes\n- All tests pass\n- Runtime behaviour unchanged","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:13:37.253291677Z","updated_at":"2025-11-25T07:13:37.253291677Z","source_repo":".","dependencies":[{"issue_id":"dh-cb3","depends_on_id":"dh-jai","type":"blocks","created_at":"2025-11-25T07:13:41.603753769Z","created_by":"daemon"}]}
{"id":"dh-e5x","content_hash":"24dda918675dbd94f1650a7449bfb0bf0e94c78f6f055dacfa7e9653c3d10b30","title":"Migrate deep-heating-web tests to Bun","description":"## Task\nMigrate tests in packages/deep-heating-web from Vitest to Bun native.\n\n## Challenges\n- SvelteKit uses Vitest by default\n- Component testing may need different approach\n- Svelte Testing Library integration\n\n## Steps\n1. Research Bun + Svelte testing options\n2. Update test imports and patterns\n3. Handle component mounting/rendering\n4. Update vite.config.ts and package.json\n5. Remove Vitest dependencies\n\n## Notes\nThis may be the most complex migration due to Svelte integration. Consider if hybrid approach (Vitest for component tests only) is acceptable.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:32.935855558Z","updated_at":"2025-11-25T07:14:32.935855558Z","source_repo":".","dependencies":[{"issue_id":"dh-e5x","depends_on_id":"dh-5rw","type":"blocks","created_at":"2025-11-25T07:14:39.568043554Z","created_by":"daemon"}]}
{"id":"dh-gno","content_hash":"7b3a262c49cf300599fb1983299e79437446a19a6dfc115b29544b2ff72a73ee","title":"Migrate testing from Jest/Vitest to Bun native","description":"## Overview\nReplace Jest and Vitest with Bun's native test runner, including Effect integration via a buntest-style utility package.\n\n## Why\n- Bun's test runner is faster\n- Native TypeScript support without ts-jest\n- Better Effect integration possible\n- Simpler toolchain (one less tool)\n\n## Scope\n- Create buntest utility package for Effect integration\n- Migrate all package tests to Bun syntax\n- Remove Jest and Vitest dependencies\n- Update Turbo pipeline for new test command\n\n## Challenges\n- Jest mocking patterns need Bun equivalents\n- Vitest's Svelte integration needs replacement\n- Effect test patterns need it.effect() support","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T07:14:32.220270678Z","updated_at":"2025-11-25T07:14:32.220270678Z","source_repo":".","dependencies":[{"issue_id":"dh-gno","depends_on_id":"dh-p8z","type":"blocks","created_at":"2025-11-25T07:14:39.496933005Z","created_by":"daemon"}]}
{"id":"dh-hgg","content_hash":"cf71e935e3f8cc145a475e282fb8f635a1eee0bcb12281c3717fc6571d721cd1","title":"Set up multi-arch Nix builds","description":"## Task\nConfigure Nix flake for multi-architecture support.\n\n## Architectures\n- x86_64-linux (primary)\n- aarch64-linux (ARM servers, Raspberry Pi)\n- aarch64-darwin (optional, for Mac development)\n\n## Implementation\n- Use flake-utils or nixpkgs.lib.systems for multi-arch\n- Configure QEMU for cross-compilation if needed\n- Test builds on both architectures\n\n## Verification\n- `nix build .#packages.x86_64-linux.dockerImage`\n- `nix build .#packages.aarch64-linux.dockerImage`","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:15:45.448272697Z","updated_at":"2025-11-25T07:15:45.448272697Z","source_repo":".","dependencies":[{"issue_id":"dh-hgg","depends_on_id":"dh-3r6","type":"blocks","created_at":"2025-11-25T07:15:50.627143754Z","created_by":"daemon"}]}
{"id":"dh-hkk","content_hash":"e1a3194e59790bd72f1bf2cec8c508f356e80cc7921208cdb2b3e92cc2eb0bfd","title":"Update ESLint to 9.x","description":"## Task\nUpdate ESLint and related plugins to version 9.x.\n\n## Dependencies to Update\n- eslint → 9.x\n- @typescript-eslint/parser → 8.x (compatible with ESLint 9)\n- @typescript-eslint/eslint-plugin → 8.x\n- eslint-config-prettier → latest\n- eslint-plugin-svelte → latest compatible\n\n## Notes\n- Some plugins may not yet support ESLint 9 flat config\n- Check compatibility before updating\n- May need to temporarily disable incompatible plugins","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:01.857328777Z","updated_at":"2025-11-25T07:14:01.857328777Z","source_repo":".","dependencies":[{"issue_id":"dh-hkk","depends_on_id":"dh-b5h","type":"blocks","created_at":"2025-11-25T07:14:06.654470948Z","created_by":"daemon"}]}
{"id":"dh-jai","content_hash":"13175bbf394d694c383ba667a63c2993add0efad5c9df6ad91b4d0127e3e1b2b","title":"Update TypeScript and related deps to 5.9.x","description":"## Task\nUpdate TypeScript and all related dependencies to latest stable versions.\n\n## Dependencies to Update\n- typescript → 5.9.x\n- @typescript-eslint/parser → latest compatible\n- @typescript-eslint/eslint-plugin → latest compatible\n- ts-jest → latest compatible (until Jest removal)\n\n## Steps\n1. Update package.json dependencies\n2. Run `bun install`\n3. Fix any immediate type errors\n4. Verify build still works","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:13:37.147036706Z","updated_at":"2025-11-25T07:13:37.147036706Z","source_repo":".","dependencies":[{"issue_id":"dh-jai","depends_on_id":"dh-b5h","type":"blocks","created_at":"2025-11-25T07:13:41.589823896Z","created_by":"daemon"}]}
{"id":"dh-k8y","content_hash":"df1e7a63a8c856a52ff4daee7a3f26b520c2fe2a8634e27dedeaccf4cae2615c","title":"Replace npm lockfile with bun.lock","description":"## Task\nRemove package-lock.json and generate bun.lock by running `bun install`.\n\n## Steps\n1. Delete package-lock.json\n2. Run `bun install` to generate bun.lock\n3. Verify all dependencies resolve correctly\n4. Check for any resolution differences between npm and bun\n\n## Verification\n- `bun install` completes without errors\n- All workspace packages are linked correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-25T07:12:18.037048567Z","updated_at":"2025-11-25T07:47:37.137086051Z","closed_at":"2025-11-25T07:47:37.137086051Z","source_repo":".","dependencies":[{"issue_id":"dh-k8y","depends_on_id":"dh-vkw","type":"blocks","created_at":"2025-11-25T07:33:58.268370587Z","created_by":"daemon"}]}
{"id":"dh-luf","content_hash":"05c07d52bd83b889f872a0c665e8a9d24243c41e169befd99f01a361f5b79f9e","title":"Remove Jest and Vitest dependencies","description":"## Task\nClean up Jest and Vitest dependencies after all tests are migrated.\n\n## Dependencies to Remove\n- jest\n- ts-jest\n- @types/jest\n- jest-environment-jsdom\n- vitest\n- @vitest/coverage-v8\n- Any other jest-* or vitest-* packages\n\n## Files to Delete\n- jest.config.ts files\n- jest.preset.js\n- vitest.config.ts files\n- Any Jest/Vitest specific setup files\n\n## Verification\n- `bun test` runs all tests successfully\n- No Jest/Vitest references remain in codebase","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:14:33.079972681Z","updated_at":"2025-11-25T07:14:33.079972681Z","source_repo":".","dependencies":[{"issue_id":"dh-luf","depends_on_id":"dh-5rw","type":"blocks","created_at":"2025-11-25T07:14:39.582336623Z","created_by":"daemon"},{"issue_id":"dh-luf","depends_on_id":"dh-09s","type":"blocks","created_at":"2025-11-25T07:14:39.59646713Z","created_by":"daemon"},{"issue_id":"dh-luf","depends_on_id":"dh-91v","type":"blocks","created_at":"2025-11-25T07:14:39.611205132Z","created_by":"daemon"},{"issue_id":"dh-luf","depends_on_id":"dh-e5x","type":"blocks","created_at":"2025-11-25T07:14:39.625573041Z","created_by":"daemon"}]}
{"id":"dh-nv4","content_hash":"98943c8cd845172ad1fe2b33ce59d6cd27bd51caa59f2d9346c0cfd7325ed581","title":"Add dependency-cruiser for architecture validation","description":"## Task\nAdd dependency-cruiser to validate architecture and detect circular dependencies.\n\n## Installation\n`bun add -D dependency-cruiser`\n\n## Configuration\nCreate .dependency-cruiser.cjs with rules for:\n- No circular dependencies\n- No orphan modules\n- Package boundary enforcement (e.g., types package shouldn't import from rx)\n\n## Integration\n- Add `deps:check` script to package.json\n- Add to Turbo `ci` pipeline\n- Configure in turbo.json","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:15:15.654944688Z","updated_at":"2025-11-25T07:15:15.654944688Z","source_repo":".","dependencies":[{"issue_id":"dh-nv4","depends_on_id":"dh-b5h","type":"blocks","created_at":"2025-11-25T07:15:20.307396845Z","created_by":"daemon"}]}
{"id":"dh-p8z","content_hash":"2c9e9729eaaab6eee8fd91f2e176c65dd2cfb2896ba310fe7965a890455725aa","title":"Migrate ESLint to v9 flat config","description":"## Overview\nMigrate from ESLint 8.x with legacy .eslintrc.json to ESLint 9.x with flat config format (eslint.config.mjs).\n\n## Why\n- ESLint 8.x is deprecated\n- Flat config is the new standard\n- Better TypeScript integration\n- Enables modern plugins like eslint-plugin-functional\n\n## Scope\n- Update ESLint to 9.x\n- Convert all config files to flat format\n- Add functional programming rules\n- Add Effect-specific linting rules","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T07:14:01.736591712Z","updated_at":"2025-11-25T07:14:01.736591712Z","source_repo":".","dependencies":[{"issue_id":"dh-p8z","depends_on_id":"dh-b44","type":"blocks","created_at":"2025-11-25T07:14:06.639968709Z","created_by":"daemon"}]}
{"id":"dh-rez","content_hash":"dfbc082e77a5f10b09cde6ab18b642db89e0f80423013c8d71422aca349fc043","title":"Increase Renovate prConcurrentLimit after Nix migration","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T17:56:47.507033Z","updated_at":"2025-11-25T17:56:47.507033Z","source_repo":".","dependencies":[{"issue_id":"dh-rez","depends_on_id":"dh-hgg","type":"blocks","created_at":"2025-11-25T18:08:47.172001Z","created_by":"daemon"}]}
{"id":"dh-vkw","content_hash":"423e1bc8a31b0391a55e993d974364e7bd7e2812294ac7ef3d04d8470b35cf89","title":"Declare rxjs as explicit dependency in packages that use it","description":"## Overview\nFix implicit dependency hoisting that was relied upon by npm. Each package must declare its own dependencies explicitly.\n\n## Packages to fix\nBased on build errors, these packages need dependency declarations:\n- rxx: needs rxjs\n- deep-heating-types: needs @effect/schema\n- deep-heating-home-assistant: needs rxjs\n- deep-heating-rx: needs rxjs\n- deep-heating-web: needs vite (peer dep of @sveltejs/kit)\n- Potentially others\n\n## Approach\n1. Audit each package's imports\n2. Add missing dependencies to each package.json\n3. Run bun install to update lockfile\n4. Verify build passes\n\n## Verification\n- `bun run build` passes\n- `bun run test` passes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-25T07:30:00.07673105Z","updated_at":"2025-11-25T07:47:37.128349198Z","closed_at":"2025-11-25T07:47:37.128349198Z","source_repo":"."}
{"id":"dh-vmp","content_hash":"31ea47e4f87b691452336e11c0efd5d6a357db39ccc7da56955a09abe5fe5a8e","title":"Update deployment documentation for Nix","description":"## Task\nUpdate all deployment documentation to reflect Nix-based builds.\n\n## Documentation Updates\n- CLAUDE.md - Update build commands\n- README.md - New build/deploy instructions\n- packages/deep-heating/README.md - Nix-specific instructions\n\n## New Commands to Document\n- `nix develop` - Enter development shell\n- `nix build .#dockerImage` - Build container\n- `docker load \u003c result` - Load image\n- Deployment to Home Assistant\n\n## Remove\n- References to Docker multi-stage builds\n- npm/yarn based build instructions","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T07:15:45.726286969Z","updated_at":"2025-11-25T07:15:45.726286969Z","source_repo":".","dependencies":[{"issue_id":"dh-vmp","depends_on_id":"dh-159","type":"blocks","created_at":"2025-11-25T07:15:50.655318831Z","created_by":"daemon"}]}
